<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link th:rel="stylesheet" th:href="@{/webjars/bootstrap/5.1.3/css/bootstrap.min.css}" />

    <!-- Google Fonts: Tech style -->
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">

    <link rel="stylesheet" th:href="@{/css/application.css}">
    <title>Issue Management Console</title>

    <style>
        /* Body + Font */
        body {
            background-color: #0a0a0a;
            color: #00ff00;
            font-family: 'Share Tech Mono', monospace;
            overflow-x: hidden;
        }

        /* Matrix Canvas */
        #matrix {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
            width: 100%;
            height: 100%;
        }

        /* Titles */
        h1.display-3, h2, h3.display-4 {
            color: #ffffff; /* bianco puro */
            text-shadow: 0 0 5px #00ff00, 0 0 10px #00ff00, 0 0 20px #00ff00; /* alone verde Matrix */
        }

        /* Flicker animation */
        @keyframes flicker {
            0%, 18%, 22%, 25%, 53%, 57%, 100% {
                opacity: 1;
                text-shadow: 0 0 5px #00ff00, 0 0 10px #00ff00;
            }
            20%, 24%, 55% {
                opacity: 0.5;
                text-shadow: none;
            }
        }
        h1.display-3 {
            animation: flicker 1.5s infinite;
        }

        /* Buttons Neon */
        .btn-light {
            background-color: #0a0a0a;
            color: #00ff00;
            border: 1px solid #00ff00;
            transition: all 0.3s ease;
        }
        .btn-light:hover {
            background-color: #00ff00;
            color: #0a0a0a;
            box-shadow: 0 0 20px #00ff00;
        }

        /* Sections background */
        .bg-primary, .bg-light {
            background-color: #0a0a0a !important;
        }

        /* Text muted */
        .text-muted {
            color: #00ff00 !important;
            text-shadow: 0 0 3px #00ff00;
        }

        /* Statistics cards */
        .stat-card {
            background-color: rgba(0, 0, 0, 0.6);
            border: 1px solid #00ff00;
            border-radius: 10px;
            padding: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 15px #00ff00;
        }

        /* Testo bianco dentro le card */
        .stat-card h3,
        .stat-card p {
            color: #ffffff !important; /* bianco puro */
            text-shadow: none;
        }
    </style>
</head>

<body>
<canvas id="matrix"></canvas>

<nav th:replace="~{navbar :: navbar('Home')}"></nav>

<!-- Hero Section -->
<div class="container-fluid py-5 text-center">
    <div class="container py-5">
        <h1 class="display-3 fw-bold mb-4">Issue Management Console</h1>
        <a href="/tickets" class="btn btn-light btn-lg px-5">Go to Tickets</a>
    </div>
</div>

<!-- Statistics Section -->
<div class="py-5">
    <div class="container">
        <h2 class="text-center mb-5">System Statistics</h2>
        <div class="row text-center g-4">
            <div class="col-md-3">
                <div class="stat-card">
                    <h3 class="display-4 fw-bold" th:text="${totalTickets}"></h3>
                    <p>Total Tickets</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <h3 class="display-4 fw-bold" th:text="${completedTickets}"></h3>
                    <p>Completed</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <h3 class="display-4 fw-bold" th:text="${inProgressTickets}"></h3>
                    <p>In Progress</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <h3 class="display-4 fw-bold" th:text="${toDoTickets}"></h3>
                    <p>Open</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap Bundle with Popper -->
<script th:src="@{/webjars/bootstrap/5.1.3/js/bootstrap.bundle.min.js}"></script>

<!-- Matrix effect JS -->
<script>
    const c = document.getElementById("matrix");
    const ctx = c.getContext("2d");
    c.height = window.innerHeight;
    c.width = window.innerWidth;

    const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*()*&^%";
    const fontSize = 16;
    const columns = c.width / fontSize;
    const drops = Array(Math.floor(columns)).fill(1);

    function draw() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
        ctx.fillRect(0, 0, c.width, c.height);
        ctx.fillStyle = "#0F0";
        ctx.font = fontSize + "px monospace";
        for(let i = 0; i < drops.length; i++){
            const text = letters.charAt(Math.floor(Math.random()*letters.length));
            ctx.fillText(text, i*fontSize, drops[i]*fontSize);
            if(drops[i]*fontSize > c.height && Math.random() > 0.975) drops[i] = 0;
            drops[i]++;
        }
    }
    setInterval(draw, 35);

    window.addEventListener('resize', () => {
        c.width = window.innerWidth;
        c.height = window.innerHeight;
    });
</script>

</body>
</html>